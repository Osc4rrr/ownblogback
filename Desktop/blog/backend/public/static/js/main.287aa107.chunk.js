(this["webpackJsonpmern-blog"]=this["webpackJsonpmern-blog"]||[]).push([[0],{103:function(e,t,n){},104:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(13),c=n.n(r),s=n(8),o=n(21),i=n(15),l=n(10),u=n.n(l),d=n(20),j="[auth] Checking Finish Login State",p="[auth] Login",b="[auth] Logout",m="[user] Loading Details",h="[user] Loading Posts",f="[user] Clear Details",x="[post] Loaded Posts",O="[post] Set Active",g="[post] Clear Active Post",v="[post] Post Updating",y="[post] Deleting",w="[post] Uploading",k="https://mernownblog.herokuapp.com/api",C=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a="".concat(k,"/").concat(e);return"GET"===n?fetch(a):fetch(a,{method:n,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})},P=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a="".concat(k,"/").concat(e),r=new FormData;return r.append("image",t),"GET"===n?fetch(a):fetch(a,{method:n,body:r})},N=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a="".concat(k,"/").concat(e),r=localStorage.getItem("token")||"";return"GET"===n?fetch(a,{method:n,headers:{"x-token":r}}):fetch(a,{method:n,headers:{"Content-Type":"application/json","x-token":r},body:JSON.stringify(t)})},D=n(12),S=n.n(D),E=function(e){return{type:m,payload:e}},T=function(){return function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N("auth/userPosts");case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,t(A(a.posts)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},F=function(e){return{type:y,payload:e}},I=function(e){return{type:v,payload:e}},A=function(e){return{type:h,payload:e}},_=function(){return{type:j}},B=function(e){return{type:p,payload:e}},L=function(){return function(e){localStorage.clear(),e({type:f}),e(R())}},R=function(){return{type:b}},Y=n(141),G=n(22),U=n(153),M=n(136),H=n(140),W=n(154),J=n(2),V=function(){return Object(J.jsx)("div",{children:Object(J.jsx)("lottie-player",{src:"https://assets4.lottiefiles.com/packages/lf20_q5pk6p1k.json",background:"transparent",speed:"1",style:{width:"300px",height:"300px"},loop:!0,autoplay:!0})})},z=n(27),X=n(7),q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useState)(e),n=Object(G.a)(t,2),r=n[0],c=n[1],s=function(){c(e)},o=function(e){var t=e.target;c(Object(X.a)(Object(X.a)({},r),{},Object(z.a)({},t.name,t.value)))};return[r,o,s]},K=function(){var e=Object(s.b)(),t=q({lEmail:"",lPassword:""}),n=Object(G.a)(t,2),a=n[0],r=n[1],c=a.lEmail,i=a.lPassword,l=Object(M.a)((function(e){return{root:{"& > *":{margin:e.spacing(0),width:"25ch"}},button:{width:"100%",height:"45px",margin:"20px 0px"},textField:{width:"100%",marginTop:"20px",height:"45px",margin:"5px 0px"}}}))();return Object(J.jsxs)("div",{className:"form-log",children:[Object(J.jsx)(V,{}),Object(J.jsxs)("form",{className:l.root,noValidate:!0,autoComplete:"off",onSubmit:function(t){var n,a;t.preventDefault(),e((n=c,a=i,function(){var e=Object(d.a)(u.a.mark((function e(t){var r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C("auth/login",{email:n,password:a},"POST");case 2:return r=e.sent,e.next=5,r.json();case 5:(c=e.sent).success?(localStorage.setItem("token",c.token),t(B({uid:c.uid,name:c.name}))):S.a.fire("Error",c.message,"error");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(J.jsx)(U.a,{className:l.textField,id:"lEmail",label:"Email",variant:"outlined",name:"lEmail",value:c,onChange:r}),Object(J.jsx)(U.a,{className:l.textField,id:"Password",label:"Password",variant:"outlined",type:"password",name:"lPassword",value:i,onChange:r}),Object(J.jsx)(W.a,{variant:"contained",color:"secondary",className:l.button,type:"submit",children:"Login"})]}),Object(J.jsxs)(H.a,{variant:"overline",display:"block",gutterBottom:!0,children:["You dont have an account?",Object(J.jsx)(o.b,{to:"/register",children:"Register Here"})]})]})},Q=function(){return Object(J.jsxs)(Y.a,{container:!0,children:[Object(J.jsx)(Y.a,{item:!0,sm:4}),Object(J.jsx)(Y.a,{item:!0,sm:4,children:Object(J.jsx)(K,{})}),Object(J.jsx)(Y.a,{item:!0,sm:4})]})},Z=function(){return Object(J.jsx)("div",{children:Object(J.jsx)("lottie-player",{src:"https://assets5.lottiefiles.com/packages/lf20_jcikwtux.json",background:"transparent",speed:"1",style:{width:"300px",height:"300px"},loop:!0,autoplay:!0})})},$=function(){var e=Object(s.b)(),t=q({rName:"",rEmail:"",rPassword1:"",rPassword2:""}),n=Object(G.a)(t,2),a=n[0],r=n[1],c=a.rName,i=a.rEmail,l=a.rPassword1,j=a.rPassword2,p=Object(M.a)((function(e){return{root:{"& > *":{margin:e.spacing(0),width:"25ch"}},button:{width:"100%",height:"45px",margin:"20px 0px"},textField:{width:"100%",marginTop:"20px",height:"45px",margin:"5px 0px"}}}))();return Object(J.jsxs)("div",{className:"form-reg",children:[Object(J.jsx)(Z,{}),Object(J.jsxs)("form",{className:p.root,noValidate:!0,autoComplete:"off",onSubmit:function(t){t.preventDefault();var n={name:c,email:i,password:l};if(l!==j)return S.a.fire("Error","Passwords must be the same","error");e(function(e){return function(){var t=Object(d.a)(u.a.mark((function t(n){var a,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C("auth/register",e,"POST");case 2:return a=t.sent,t.next=5,a.json();case 5:(r=t.sent).success?(localStorage.setItem("token",r.token),n(B({uid:r.uid,name:r.name}))):S.a.fire("Error",r.message,"error");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(n))},children:[Object(J.jsx)(U.a,{className:p.textField,id:"outlined-basic",label:"Name",name:"rName",value:c,onChange:r,variant:"outlined"}),Object(J.jsx)(U.a,{className:p.textField,id:"outlined-basic",label:"Email",variant:"outlined",name:"rEmail",value:i,onChange:r}),Object(J.jsx)(U.a,{className:p.textField,id:"outlined-basic",label:"Password",variant:"outlined",type:"password",name:"rPassword1",value:l,onChange:r}),Object(J.jsx)(U.a,{className:p.textField,id:"outlined-basic",label:"Confirm Password",variant:"outlined",type:"password",name:"rPassword2",value:j,onChange:r}),Object(J.jsx)(W.a,{variant:"contained",color:"secondary",className:p.button,type:"submit",children:"Register"})]}),Object(J.jsxs)(H.a,{variant:"overline",display:"block",gutterBottom:!0,children:["Already Registered? ",Object(J.jsx)(o.b,{to:"/login",children:"Login Here"})]})]})},ee=function(){return Object(J.jsxs)(Y.a,{container:!0,children:[Object(J.jsx)(Y.a,{item:!0,sm:4}),Object(J.jsx)(Y.a,{item:!0,sm:4,children:Object(J.jsx)($,{})}),Object(J.jsx)(Y.a,{item:!0,sm:4})]})},te=function(e){return{type:w,payload:e}},ne=function(e){return{type:x,payload:e}},ae=function(e){return{type:O,payload:e}},re=Object(M.a)({root:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"}}),ce=function(){var e=re();return Object(J.jsx)("div",{className:e.root,children:Object(J.jsx)("lottie-player",{src:"https://assets8.lottiefiles.com/packages/lf20_iy2i0ky0.json",mode:"bounce",background:"transparent",speed:"3",style:{width:"300px",height:"300px"},loop:!0,autoplay:!0})})},se=n(142),oe=n(143),ie=n(144),le=n(40),ue=n.n(le),de=Object(M.a)({root:{maxWidth:300,margin:"10px",height:"100%"},posted:{margin:"10px 0px"},btnMore:{display:"flex",justifyContent:"flex-end"},btnStyle:{backgroundColor:"#ccc",padding:"10px",borderRadius:"10%",color:"#333",textDecoration:"none",fontFamily:"roboto",fontSize:"12px",textTransform:"capitalize"}}),je=function(e){var t=Object(s.b)(),n=Object(i.g)(),a=e.post,r=de();return Object(J.jsx)("div",{children:Object(J.jsxs)(se.a,{className:r.root,children:[Object(J.jsx)(oe.a,{component:"img",alt:"Contemplative Reptile",height:"150",image:"".concat(a.image),title:"Contemplative Reptile"}),Object(J.jsxs)(ie.a,{children:[Object(J.jsx)(H.a,{gutterBottom:!0,variant:"h5",component:"h2",children:a.title}),Object(J.jsx)(H.a,{variant:"body2",color:"textSecondary",component:"p",children:a.description}),Object(J.jsxs)(H.a,{className:r.posted,variant:"caption",display:"block",gutterBottom:!0,children:["Posted on ",ue()(a.posted).format("DD/MM/YYYY HH:mm")," by ",a.user.name]}),Object(J.jsx)("div",{className:r.btnMore,children:Object(J.jsx)(W.a,{className:r.btnStyle,onClick:function(){t(ae(a)),n.push("/post/".concat(a.id))},children:"Ver mas"})})]})]})})},pe=Object(M.a)({root:{backgroundColor:"tranparent",display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",flexWrap:"wrap",margin:"3.3rem"}}),be=function(){var e=Object(s.b)();Object(a.useEffect)((function(){e(function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N("posts");case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,t(ne(a.posts)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}())}),[e]);var t=pe(),n=Object(s.c)((function(e){return e.post})).posts;return 0===n.length?Object(J.jsx)(ce,{}):Object(J.jsx)(J.Fragment,{children:Object(J.jsx)("div",{className:t.root,children:n.map((function(e){return Object(J.jsx)(je,{post:e},e.id)}))})})},me=function(e){e.history;return Object(J.jsx)("div",{children:Object(J.jsx)(be,{})})},he=n(77),fe=n.n(he),xe=Object(M.a)({root:{},container:{display:"flex",justifyContent:"center",alignItems:"",height:"100%",marginTop:"2rem"},mediaImg:{border:"0 solid #333"},goBackLink:{position:"absolute",textTransform:"uppercase",textDecoration:"none",color:"#333",left:"10px",margin:"-25px 0px"}}),Oe=function(e){var t=e.history,n=xe(),a=Object(s.c)((function(e){return e.post})).activePost;return null===a&&t.push("/"),Object(J.jsxs)("div",{className:n.container,children:[Object(J.jsx)(o.b,{to:"/",className:n.goBackLink,children:Object(J.jsx)(fe.a,{})}),Object(J.jsxs)(se.a,{className:n.root,children:[Object(J.jsx)(oe.a,{component:"img",alt:"Contemplative Reptile",height:"300",image:"".concat(a.image),title:"Contemplative Reptile",className:n.mediaImg}),Object(J.jsxs)(ie.a,{children:[Object(J.jsx)(H.a,{variant:"h4",children:a.title}),Object(J.jsx)(H.a,{variant:"body2",component:"p",children:a.description}),Object(J.jsxs)(H.a,{variant:"overline",component:"p",children:["Posted ",ue()(a.posted).fromNow(),"  by ",a.user.name]})]})]})]})},ge=n(59),ve=function(e){var t=e.isAuthenticated,n=e.component,a=Object(ge.a)(e,["isAuthenticated","component"]);return Object(J.jsx)(i.b,Object(X.a)(Object(X.a)({},a),{},{component:function(e){return t?Object(J.jsx)(n,Object(X.a)({},e)):Object(J.jsx)(i.a,{to:"/login"})}}))},ye=function(e){var t=e.isAuthenticated,n=e.component,a=Object(ge.a)(e,["isAuthenticated","component"]);return Object(J.jsx)(i.b,Object(X.a)(Object(X.a)({},a),{},{component:function(e){return t?Object(J.jsx)(i.a,{to:"/"}):Object(J.jsx)(n,Object(X.a)({},e))}}))},we=n(145),ke=n(146),Ce=Object(M.a)((function(e){return{root:{flexGrow:1,boxShadow:"none",backgroundColor:"#333"},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},titleAuth:{margin:"0px 10px"},linkTitle:{color:"white",textDecoration:"none"}}})),Pe=function(){var e=Object(i.g)(),t=Object(s.c)((function(e){return e.auth})).uid,n=Object(s.b)(),a=Object(s.c)((function(e){return e.auth})).name,r=Ce();return Object(J.jsx)(J.Fragment,{children:Object(J.jsx)(we.a,{position:"static",className:r.root,children:Object(J.jsxs)(ke.a,{children:[Object(J.jsx)(H.a,{className:r.title,variant:"overline",display:"block",children:Object(J.jsx)(o.b,{to:"/",className:r.linkTitle,children:"Post OwnBlog"})}),t?Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(W.a,{display:"block",color:"inherit",onClick:function(){e.push("/profile")},children:"Profile"}),Object(J.jsx)(W.a,{display:"block",color:"inherit",onClick:function(){e.push("/posts/new")},children:"New Post"}),Object(J.jsx)(W.a,{display:"block",color:"inherit",onClick:function(){n(L())},children:"Logout"}),Object(J.jsxs)(H.a,{className:r.titleAuth,variant:"overline",display:"block",gutterBottom:!0,children:["| Hola ",a]})]}):null]})})})},Ne=Object(M.a)((function(e){return{formContainer:Object(z.a)({background:"",width:"50%",padding:"10px",display:"flex"},e.breakpoints.down("xs"),{width:"100%"}),form:{display:"flex",justifyContent:"center",width:"100%",flexDirection:"column",backgroundColor:"#ccc",padding:"0rem"},textField:{backgroundColor:"",width:"100%",margin:"1rem 0rem"}}})),De=function(){var e=Object(i.g)(),t=Object(s.b)(),n=Object(a.useState)(!1),r=Object(G.a)(n,2),c=r[0],o=r[1],l=Object(a.useState)(""),j=Object(G.a)(l,2),p=j[0],b=j[1],m=Ne(),h=q({title:"",description:""}),f=Object(G.a)(h,2),x=f[0],O=f[1],g=x.title,v=x.description,y=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.files[0],o(!0),e.prev=2,e.next=5,P("uploadImage",n,"POST");case 5:return a=e.sent,e.next=8,a.json();case 8:(r=e.sent).success&&(o(!1),b("".concat("https://mernownblog.herokuapp.com").concat(r.imagePath))),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),console.log("imagen no fue subida"),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(J.jsx)(J.Fragment,{children:Object(J.jsx)("div",{className:m.formContainer,children:Object(J.jsxs)("form",{className:m.form,onSubmit:function(n){n.preventDefault();var a=(new Date).toISOString().slice(0,16).replace("T"," ");g&&v&&p?(t(function(e){return function(){var t=Object(d.a)(u.a.mark((function t(n,a){var r,c,s,o,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().auth,c=r.uid,s=r.name,t.prev=1,t.next=4,N("posts",e,"POST");case 4:return o=t.sent,t.next=7,o.json();case 7:if(!(i=t.sent).success){t.next=16;break}e.id=i.post.id,e.user={_id:c,name:s},S.a.fire("Success","Post was saved","success"),n(te(e)),n(T()),t.next=17;break;case 16:return t.abrupt("return",S.a.fire("Error",i.message,"error"));case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(1),console.log(t.t0);case 22:case"end":return t.stop()}}),t,null,[[1,19]])})));return function(e,n){return t.apply(this,arguments)}}()}({title:g,description:v,posted:a,image:p})),e.push("/profile")):S.a.fire("Error","Please Complete all the fields","error")},children:[Object(J.jsx)(U.a,{className:m.textField,id:"title",label:"Title",variant:"outlined",name:"title",value:g,onChange:O}),Object(J.jsx)(U.a,{className:m.textField,id:"description",label:"Description",variant:"outlined",name:"description",multiline:!0,rows:10,value:v,onChange:O}),Object(J.jsxs)(W.a,{className:m.textField,variant:"outlined",component:"label",children:["Upload Image",Object(J.jsx)("input",{onChange:y,type:"file",hidden:!0})]}),c&&"Cargando imagen...",p&&Object(J.jsx)("a",{href:p,target:"_blank",rel:"noreferrer",children:p}),Object(J.jsx)(W.a,{className:m.textField,type:"submit",variant:"contained",color:"secondary",children:"Save Post"})]})})})},Se=Object(M.a)({newPostContainer:{display:"flex",backgroundColor:"",height:"100%",justifyContent:"center",alignItems:"center",flexDirection:"column",margin:"2rem 0rem"},titleContainer:{margin:"25px 0px",textTransform:"uppercase",fontWeight:"lighter"}}),Ee=function(){var e=Se();return Object(J.jsxs)("div",{className:e.newPostContainer,children:[Object(J.jsx)(H.a,{variant:"h5",className:e.titleContainer,children:"New Post"}),Object(J.jsx)(De,{})]})},Te=n(149),Fe=n(80),Ie=n(150),Ae=n(151),_e=n(147),Be=n(148),Le=n(152),Re=Object(M.a)({tableImage:{width:"50px"}}),Ye=function(e){var t=e.post,n=e.history,a=Re(),r=Object(s.b)(),c=function(e){S.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(t){t.isConfirmed&&r(function(e){return function(){var t=Object(d.a)(u.a.mark((function t(n){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N("posts/".concat(e),{},"DELETE");case 3:return a=t.sent,t.next=6,a.json();case 6:t.sent.success&&S.a.fire("Success","Post was deleted","success"),n(F(e)),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),S.a.fire("Error","It was an error","error"),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}(e))}))};return Object(J.jsx)(J.Fragment,{children:Object(J.jsxs)(_e.a,{children:[Object(J.jsxs)(Be.a,{children:[" ",t.title]}),Object(J.jsxs)(Be.a,{children:[" ",ue()(t.posted).fromNow()," "]}),Object(J.jsx)(Be.a,{children:Object(J.jsx)(oe.a,{component:"img",alt:"Post detail",width:"25",height:"25",image:"".concat(t.image),title:"Post detail",className:a.tableImage})}),Object(J.jsxs)(Be.a,{children:[Object(J.jsx)(W.a,{onClick:function(){return e=t.id,r(ae(t)),void n.push("/post/edit/".concat(e));var e},children:"Edit"}),Object(J.jsx)(W.a,{onClick:function(){return c(t.id)},children:"Delete"})]})]})})},Ge=Object(M.a)({profileScreenContainer:{display:"flex",backgroundColor:"",justifyContent:"center"},titleProfileScreen:{margin:"2rem 0rem"},dataPostContainer:{display:"flex",justifyContent:"space-around",margin:"1rem 0rem",backgroundColor:""},titlesPostData:{fontWeight:"lighter",margin:"1rem 0rem"},myDataContainer:{display:"flex",flexDirection:"column",backgroundColor:""},myDataTextField:{margin:".5rem 0rem"},formData:{backgroundColor:"",width:"45%"},tableDataD:{width:"45%"},tableData:{fontFamily:"arial",border:"1px solid #333"}}),Ue=function(){var e=Ge(),t=Object(s.b)(),n=Object(s.c)((function(e){return e.userDetails})).userDetails;Object(a.useEffect)((function(){0===Object.keys(n).length&&t(function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N("auth/userDetails");case 3:return n=e.sent,e.next=6,n.json();case 6:(a=e.sent).success&&t(E(a.user)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}())}),[t,n]);var r=Object(a.useState)(n),c=Object(G.a)(r,2),o=c[0],i=c[1];Object(a.useEffect)((function(){i(n)}),[n]);var l=function(e){i(Object(X.a)(Object(X.a)({},o),{},Object(z.a)({},e.target.name,e.target.value)))};return Object(J.jsx)("div",{children:Object.keys(n).length>0?Object(J.jsxs)("form",{className:e.myDataContainer,onSubmit:function(e){e.preventDefault();var n=o.name,a=o.email,r=o.password;if(r===o.password2)if(n&&a){var c={name:n,email:a,password:r,id:o._id};t(function(e){return function(){var t=Object(d.a)(u.a.mark((function t(n){var a,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N("auth/".concat(e.id),e,"PUT");case 3:return a=t.sent,t.next=6,a.json();case 6:(r=t.sent).success?(console.log(r),S.a.fire("Success","User was updated","success"),n(E({_id:r.uid,name:r.name,email:r.email})),localStorage.setItem("token",r.token),n(B({uid:r.uid,name:r.name}))):S.a.fire("Error",r.message,"error"),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),S.a.fire("Error",t.t0,"error"),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(c))}else S.a.fire("Error","Please complete all the fields","error");else S.a.fire("Error","Password must be the same","error")},children:[Object(J.jsx)(U.a,{className:e.myDataTextField,id:"name",label:"",variant:"outlined",name:"name",value:o.name,onChange:l}),Object(J.jsx)(U.a,{id:"email",variant:"outlined",label:"",name:"email",className:e.myDataTextField,value:o.email,onChange:l}),Object(J.jsx)(U.a,{id:"password",label:"Password",variant:"outlined",name:"password",className:e.myDataTextField,value:o.password,type:"password",onChange:l}),Object(J.jsx)(U.a,{id:"password2",label:"Confirm Password",variant:"outlined",name:"password2",type:"password",className:e.myDataTextField,value:o.password2,onChange:l}),Object(J.jsx)(W.a,{variant:"outlined",type:"submit",children:"Save"})]}):"Cargando..."})},Me=Object(M.a)({profileScreenContainer:{display:"flex",backgroundColor:"",justifyContent:"center"},titleProfileScreen:{margin:"2rem 0rem"},dataPostContainer:{display:"flex",justifyContent:"space-around",margin:"1rem 0rem",backgroundColor:""},titlesPostData:{fontWeight:"lighter",margin:"1rem 0rem"},myDataContainer:{display:"flex",flexDirection:"column",backgroundColor:""},myDataTextField:{margin:".5rem 0rem"},formData:{backgroundColor:"",width:"45%"},tableDataD:{width:"45%"},tableData:{fontFamily:"arial",border:"1px solid #333"}}),He=function(e){var t=e.history,n=Me(),r=Object(s.b)(),c=Object(s.c)((function(e){return e.userDetails})).userPosts;return Object(a.useEffect)((function(){0===c.length&&r(T())}),[r,c]),Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)("div",{className:n.profileScreenContainer,children:Object(J.jsx)(H.a,{variant:"h5",className:n.titleProfileScreen,children:"PROFILE"})}),Object(J.jsxs)("div",{className:n.dataPostContainer,children:[Object(J.jsxs)("div",{className:n.formData,children:[Object(J.jsx)(H.a,{variant:"h6",className:n.titlesPostData,children:"MY DATA"}),Object(J.jsx)(Ue,{})]}),Object(J.jsxs)("div",{className:n.tableDataD,children:[Object(J.jsx)(H.a,{variant:"h6",className:n.titlesPostData,children:"MY POSTS"}),Object(J.jsx)(Te.a,{component:Fe.a,children:Object(J.jsxs)(Ie.a,{children:[Object(J.jsx)(Ae.a,{children:Object(J.jsxs)(_e.a,{children:[Object(J.jsx)(Be.a,{children:" Title "}),Object(J.jsx)(Be.a,{children:" Date Posted "}),Object(J.jsx)(Be.a,{children:" Image "}),Object(J.jsx)(Be.a,{children:" Actions "})]})}),Object(J.jsx)(Le.a,{children:c.map((function(e){return Object(J.jsx)(Ye,{post:e,history:t},e.id)}))})]})})]})]})]})},We=Object(M.a)((function(e){return{formContainer:Object(z.a)({background:"",width:"50%",padding:"10px",display:"flex"},e.breakpoints.down("xs"),{width:"100%"}),form:{display:"flex",justifyContent:"center",width:"100%",flexDirection:"column",backgroundColor:"#ccc",padding:"0rem"},textField:{backgroundColor:"",width:"100%",margin:"1rem 0rem"}}})),Je=function(){var e=Object(s.b)(),t=We(),n=Object(i.g)(),r=Object(a.useState)(!1),c=Object(G.a)(r,2),o=c[0],l=c[1],j=Object(a.useState)(""),p=Object(G.a)(j,2),b=p[0],m=p[1],h=Object(s.c)((function(e){return e.post})).activePost;null===h&&n.push("/profile");var f=q({title:h?h.title:"",description:h?h.description:""}),x=Object(G.a)(f,2),O=x[0],g=x[1],v=O.title,y=O.description,w=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.files[0],l(!0),e.prev=2,e.next=5,P("uploadImage",n,"POST");case 5:return a=e.sent,e.next=8,a.json();case 8:(r=e.sent).success&&(l(!1),m("".concat("https://mernownblog.herokuapp.com").concat(r.imagePath))),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),console.log("imagen no fue subida"),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(J.jsx)(J.Fragment,{children:Object(J.jsx)("div",{className:t.formContainer,children:Object(J.jsxs)("form",{className:t.form,onSubmit:function(t){t.preventDefault();var a={id:h.id,title:v,description:y,image:b||h.image};a.title&&a.description&&a.image?(e(function(e){return function(){var t=Object(d.a)(u.a.mark((function t(n){var a,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N("posts/".concat(e.id),e,"PUT");case 3:return a=t.sent,t.next=6,a.json();case 6:(r=t.sent).success&&S.a.fire("Success","Post was updated","success"),n(I(r.post)),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),S.a.fire("Error","Hubo un error"+t.t0,"error"),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}(a)),n.push("/profile")):S.a.fire("Error","Please Complete all the fields","error")},children:[Object(J.jsx)(U.a,{className:t.textField,id:"title",label:"Title",variant:"outlined",name:"title",value:v,onChange:g}),Object(J.jsx)(U.a,{className:t.textField,id:"description",label:"",variant:"outlined",name:"description",multiline:!0,rows:10,value:y,onChange:g}),Object(J.jsxs)(W.a,{className:t.textField,variant:"outlined",component:"label",children:["Upload Image",Object(J.jsx)("input",{onChange:w,type:"file",hidden:!0})]}),o&&"Cargando imagen...",b&&"New Image: ".concat(b),h?Object(J.jsx)("a",{href:h.image,target:"_blank",rel:"noreferrer",children:h.image}):"",Object(J.jsx)(W.a,{className:t.textField,type:"submit",variant:"contained",color:"secondary",children:"Edit Post"})]})})})},Ve=Object(M.a)({newPostContainer:{display:"flex",backgroundColor:"",height:"100%",justifyContent:"center",alignItems:"center",flexDirection:"column",margin:"2rem 0rem"},titleContainer:{margin:"25px 0px",textTransform:"uppercase",fontWeight:"lighter"}}),ze=function(e){var t=e.match,n=Ve();return Object(J.jsxs)("div",{className:n.newPostContainer,children:[Object(J.jsx)(H.a,{variant:"h5",className:n.titleContainer,children:"Edit Post"}),Object(J.jsx)(Je,{id:t.params.id})]})},Xe=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.auth})),n=t.checking,r=t.uid;return Object(a.useEffect)((function(){e(function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("auth/renew");case 2:return n=e.sent,e.next=5,n.json();case 5:(a=e.sent).success?(localStorage.setItem("token",a.token),t(B({uid:a.uid,name:a.name}))):(S.a.fire("Error",a.message,"error"),t(_()));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),n?Object(J.jsx)(ce,{}):Object(J.jsx)(o.a,{children:Object(J.jsxs)("div",{children:[Object(J.jsx)(Pe,{}),Object(J.jsxs)(i.d,{children:[Object(J.jsx)(ye,{exact:!0,path:"/login",component:Q,isAuthenticated:!!r}),Object(J.jsx)(ye,{exact:!0,path:"/register",component:ee,isAuthenticated:!!r}),Object(J.jsx)(ve,{exact:!0,path:"/",component:me,isAuthenticated:!!r}),Object(J.jsx)(ve,{exact:!0,path:"/post/:id",component:Oe,isAuthenticated:!!r}),Object(J.jsx)(ve,{exact:!0,path:"/posts/new",component:Ee,isAuthenticated:!!r}),Object(J.jsx)(ve,{exact:!0,path:"/profile",component:He,isAuthenticated:!!r}),Object(J.jsx)(ve,{exact:!0,path:"/post/edit/:id",component:ze,isAuthenticated:!!r}),Object(J.jsx)(i.a,{to:"/"})]})]})})},qe=n(32),Ke=n(78),Qe={checking:!0,uid:null,name:null},Ze=n(65),$e={posts:[],activePost:null},et={userDetails:{},userPosts:[]},tt=Object(qe.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(X.a)(Object(X.a)(Object(X.a)({},e),t.payload),{},{checking:!1});case j:return Object(X.a)(Object(X.a)({},e),{},{checking:!1});case b:return{checking:!1};default:return e}},post:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(X.a)(Object(X.a)({},e),{},{posts:Object(Ze.a)(t.payload)});case O:return Object(X.a)(Object(X.a)({},e),{},{activePost:t.payload});case g:return Object(X.a)(Object(X.a)({},e),{},{activePost:{}});case w:return Object(X.a)(Object(X.a)({},e),{},{posts:[].concat(Object(Ze.a)(e.posts),[t.payload])});default:return e}},userDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(X.a)(Object(X.a)({},e),{},{userDetails:t.payload});case h:return Object(X.a)(Object(X.a)({},e),{},{userPosts:t.payload});case v:return Object(X.a)(Object(X.a)({},e),{},{userPosts:e.userPosts.map((function(e){return e.id===t.payload.id?t.payload:e}))});case y:return Object(X.a)(Object(X.a)({},e),{},{userPosts:e.userPosts.filter((function(e){return e.id!==t.payload}))});case f:return Object(X.a)(Object(X.a)({},e),et);default:return e}}}),nt="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||qe.d,at=Object(qe.e)(tt,nt(Object(qe.a)(Ke.a))),rt=function(){return Object(J.jsx)(s.a,{store:at,children:Object(J.jsx)(Xe,{})})};n(103);c.a.render(Object(J.jsx)(rt,{}),document.getElementById("root"))}},[[104,1,2]]]);
//# sourceMappingURL=main.287aa107.chunk.js.map